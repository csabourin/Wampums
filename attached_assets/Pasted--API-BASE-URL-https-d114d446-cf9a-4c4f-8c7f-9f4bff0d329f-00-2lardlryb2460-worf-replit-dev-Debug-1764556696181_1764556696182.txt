 API_BASE_URL: https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev
 Debug Mode: true
 App init started
 Fetching organization ID...
 init-activity-widget.js loaded
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
 Service Worker registered with scope: https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
Fetch finished loading: GET "<URL>".
 Organization ID fetched and stored: 1
 No JWT token found, fetching organization JWT...
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
XHR finished loading: POST "<URL>".
 Organization JWT obtained successfully
 Fetching organization settings...
 Inside fetchOrganizationSettings, this: {isLoggedIn: false, userRole: null, userFullName: null, lang: null, currentPage: '', …}
 Fetching organization settings ... 1
 Upgrading IndexedDB...
 IndexedDB opened successfully
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: org_settings_1
 === GET AUTH HEADER DEBUG ===
 Token exists: true
 Organization ID: 1
 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcmdhbml6Y...
 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcm…0NjB9.Q7Ublg0r8qFIhX6Nyrqa095ednRqOOLHSFxlGyoKqHc', x-organization-id: '1'}
 === END AUTH HEADER DEBUG ===
 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/organization-settings?organization_id=1
 API Response: {success: true, data: {…}}
 IndexedDB opened successfully
 Data stored successfully: {key: 'org_settings_1', data: {…}, type: 'cache', timestamp: 1764556624183, expiration: 1764643024183}
 Data cached for: org_settings_1
 Got organization settings:  {"success":true,"data":{"badge_system":{"territoires":[{"name":"Débrouillard comme Kaa","image":"kaa.jpg"},{"name":"Vrai comme Baloo","image":"baloo.jpg"},{"name":"Respectueux comme Rikki Tikki Tavi","image":"rikki.jpg"},{"name":"Dynamique comme Bagheera","image":"bagheera.jpg"},{"name":"Heureux comme Ferao","image":"ferao.jpg"},{"name":"Solidaire comme Frère Gris","image":"frereGris.jpg"}],"badge_structure":{"fields":[{"name":"territoire_chasse","type":"select","label":"territoire_chasse"},{"name":"objectif","type":"textarea","label":"objectif_proie"},{"name":"description","type":"textarea","label":"description"},{"name":"fierte","type":"checkbox","label":"fierte"},{"name":"raison","type":"textarea","label":"raison"},{"name":"date_obtention","type":"date","label":"date_obtention"},{"max":3,"min":1,"name":"etoiles","type":"number","label":"etoiles"}]}},"organization_info":{"logo":"/images/6eASt-Paul.png","name":"6e A St-Paul d'Aylmer","unit":"6e A St-Paul d'Aylmer","endroit":"École du village","district":"District des Trois-Rives","meeting_day":"Tuesday","animateur_responsable":"Akela","account_creation_password":"Aylmer2024-2025"},"point_system_rules":{"badges":{"earn":5,"level_up":10},"honors":{"award":5},"attendance":{"late":{"label":"late","points":0},"absent":{"label":"absent","points":0},"excused":{"label":"excused","points":0},"present":{"label":"present","points":1}}}}}
 Organization settings fetched successfully: {badge_system: {…}, organization_info: {…}, point_system_rules: {…}}
 Loading translations...
 Session check: {isLoggedIn: false, userRole: null, userFullName: null, userId: null}
 Session checked: {isLoggedIn: false, userRole: null, userFullName: null}
 Initializing router...
 Routing to current path: /formulaire-inscription
 Routing to: /formulaire-inscription
 Path: /formulaire-inscription, RouteName: formulaireInscription
 Session check: {isLoggedIn: false, userRole: null, userFullName: null, userId: null}
 Redirecting to login from route: formulaireInscription
overrideMethod @ installHook.js:1
route @ router.js:131
init @ app.js:276
await in init
(anonymous) @ app.js:565
 Login init started
 Rendering login form, organizationSettings: loaded
 Login.render() called
 Using organization name: 6e A St-Paul d'Aylmer
 Failed to translating key: login in language: fr
 Failed to translating key: email in language: fr
 Failed to translating key: password in language: fr
 Failed to translating key: submit_login in language: fr
 Failed to translating key: create_account in language: fr
 Failed to translating key: forgot_password in language: fr
 Attaching login form listener
 Login form listener attached
 Login form rendered successfully
 App init completed
 IndexedDB opened successfully
 Retrieved offline data: []
 Translations loaded successfully {en: {…}, fr: {…}}
 Routing to: /login
 Path: /login, RouteName: login
 Session check: {isLoggedIn: false, userRole: null, userFullName: null, userId: null}
 Login init started
 Rendering login form, organizationSettings: loaded
 Login.render() called
 Using organization name: 6e A St-Paul d'Aylmer
 Attaching login form listener
 Login form listener attached
 Login form rendered successfully
login:1 [DOM] Input elements should have autocomplete attributes (suggested: "current-password"): (More info: https://www.chromium.org/developers/design-documents/create-amazing-password-forms) 
 Clients: [WindowClient]
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
Fetch finished loading: POST "<URL>".
 Login form submitted
 Sending login request via ajax-functions.js...info@christiansabourin.com
 Sending login request via ajax-functions.js... info@christiansabourin.com
 Login result received: {success: true, message: 'login_successful', token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', user_role: 'admin', user_full_name: 'Admin Csabourin', …}
 Login successful, handling login success...
 === LOGIN SUCCESS DEBUG ===
 Full result object: {success: true, message: 'login_successful', token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', user_role: 'admin', user_full_name: 'Admin Csabourin', …}
 result.success: true
 result.token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoiMGRmM2JmMjctNGIwMC00YzY5LWI4ZmUtMDRhZDQ4ZDFjNjMxIiwidXNlcl9yb2xlIjoiYWRtaW4iLCJvcmdhbml6YXRpb25JZCI6MSwiaWF0IjoxNzY0NTU2NjYyLCJleHAiOjE3NjUxNjE0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM
 result.user_id: 0df3bf27-4b00-4c69-b8fe-04ad48d1c631
 result.user_role: admin
 result.user_full_name: Admin Csabourin
 === END LOGIN DEBUG ===
 === STORING USER DATA ===
 Token: EXISTS
 User ID: 0df3bf27-4b00-4c69-b8fe-04ad48d1c631
 User Role: admin
 User Full Name: Admin Csabourin
 === FINAL LOCALSTORAGE CHECK ===
 jwtToken: STORED
 userId: 0df3bf27-4b00-4c69-b8fe-04ad48d1c631
 userRole: admin
 currentOrganizationId: 1
 organizationId: 1
 Redirecting to main dashboard
 Routing to: /dashboard
 Path: /dashboard, RouteName: dashboard
 Session check: {isLoggedIn: true, userRole: 'admin', userFullName: 'Admin Csabourin', userId: '0df3bf27-4b00-4c69-b8fe-04ad48d1c631'}
 Organization settings from app: {badge_system: {…}, organization_info: {…}, point_system_rules: {…}}
 IndexedDB opened successfully
 IndexedDB opened successfully
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: dashboard_groups
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: dashboard_participant_info
 IndexedDB opened successfully
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: participants
 === GET AUTH HEADER DEBUG ===
 Token exists: true
 Organization ID: 1
 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
 === END AUTH HEADER DEBUG ===
 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/participants?organization_id=1
 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/public/login".
login @ ajax-functions.js:572
(anonymous) @ login.js:94
 API Response: {success: true, data: Array(28), participants: Array(28)}
 IndexedDB opened successfully
 Data stored successfully: {key: 'participants', data: {…}, type: 'cache', timestamp: 1764556626191, expiration: 1764558426191}
 Data cached for: participants
 IndexedDB opened successfully
 IndexedDB opened successfully
 IDBRequest {result: {…}, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' {key: 'participants', data: {…}, type: 'cache', timestamp: 1764556626191, expiration: 1764558426191}
 Returning valid cached data: {success: true, data: Array(28), participants: Array(28)}
 Cache hit for: participants
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: groups
 === GET AUTH HEADER DEBUG ===
 Token exists: true
 Organization ID: 1
 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
 === END AUTH HEADER DEBUG ===
 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/get_groups?organization_id=1
 API Response: {success: true, data: Array(5), groups: Array(5)}
 IndexedDB opened successfully
 Data stored successfully: {key: 'groups', data: {…}, type: 'cache', timestamp: 1764556626279, expiration: 1764558426279}
 Data cached for: groups
 IndexedDB opened successfully
 Data stored successfully: {key: 'dashboard_participant_info', data: Array(28), type: 'cache', timestamp: 1764556626280, expiration: 1764556926280}
 IndexedDB opened successfully
 Data stored successfully: {key: 'dashboard_groups', data: Array(5), type: 'cache', timestamp: 1764556626280, expiration: 1764560226280}
 Initializing ActivityWidget
 App state: {isLoggedIn: true, userRole: 'admin'}
 ActivityWidget constructor called
 App object: {isLoggedIn: true, userRole: 'admin', userFullName: 'Admin Csabourin', lang: 'fr', currentPage: '', …}
 ActivityWidget init called
 Is logged in: true
 User role: admin
 IndexedDB opened successfully
 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
 No data found for key: reunion-preparation
 === GET AUTH HEADER DEBUG ===
 Token exists: true
 Organization ID: 1
 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
 === END AUTH HEADER DEBUG ===
 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/reunion-preparation?date=2025-12-01&organization_id=1
 API Response: {success: false, message: 'No reunion preparation found for this date'}
 Fetched reunion preparation data: {success: false, message: 'No reunion preparation found for this date'}
activity-widget.js:60 No activities found in the fetched data
activity-widget.js:31 No activities found for today, stopping widget.
router.js:48 Routing to: /parent-dashboard
router.js:302 Path: /parent-dashboard, RouteName: parentDashboard
login.js:224 Session check: {isLoggedIn: true, userRole: 'admin', userFullName: 'Admin Csabourin', userId: '0df3bf27-4b00-4c69-b8fe-04ad48d1c631'}
indexedDB.js:15 IndexedDB opened successfully
indexedDB.js:80 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
indexedDB.js:87 No data found for key: parent-dashboard-data
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1
service-worker.js:268 Fetch failed loading: GET "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1".
networkFirst @ service-worker.js:268
(anonymous) @ service-worker.js:105
ajax-functions.js:224   GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
ajax-functions.js:94  API request failed (attempt 1): Error: Endpoint not found
    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async makeApiRequestWithCache (ajax-functions.js:266:20)
    at async ParentDashboard.fetchParticipants (parent_dashboard.js:82:58)
    at async ParentDashboard.init (parent_dashboard.js:14:25)
    at async Router.loadParentDashboard (router.js:342:5)
    at async Router.route (router.js:177:11)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
ajax-functions.js:224 Fetch failed loading: GET "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1".
makeApiRequest @ ajax-functions.js:224
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
ajax-functions.js:88 API Request (attempt 2): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1
ajax-functions.js:224   GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
service-worker.js:268 Fetch failed loading: GET "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1".
networkFirst @ service-worker.js:268
(anonymous) @ service-worker.js:105
ajax-functions.js:94  API request failed (attempt 2): Error: Endpoint not found
    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async makeApiRequestWithCache (ajax-functions.js:266:20)
    at async ParentDashboard.fetchParticipants (parent_dashboard.js:82:58)
    at async ParentDashboard.init (parent_dashboard.js:14:25)
    at async Router.loadParentDashboard (router.js:342:5)
    at async Router.route (router.js:177:11)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
parent_dashboard.js:99  Error fetching participants: Error: Failed to complete API request after 2 attempts: Endpoint not found
    at makeApiRequest (ajax-functions.js:241:11)
    at async makeApiRequestWithCache (ajax-functions.js:266:20)
    at async ParentDashboard.fetchParticipants (parent_dashboard.js:82:58)
    at async ParentDashboard.init (parent_dashboard.js:14:25)
    at async Router.loadParentDashboard (router.js:342:5)
    at async Router.route (router.js:177:11)
overrideMethod @ hook.js:608
fetchParticipants @ parent_dashboard.js:99
await in fetchParticipants
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
indexedDB.js:15 IndexedDB opened successfully
indexedDB.js:80 IDBRequest {result: undefined, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' undefined
indexedDB.js:87 No data found for key: org_form_formats_current
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): GET https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/organization-form-formats?organization_id=1
ajax-functions.js:224 Fetch failed loading: GET "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/parent-dashboard-data?organization_id=1".
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
makeApiRequestWithCache @ ajax-functions.js:266
await in makeApiRequestWithCache
get @ ajax-functions.js:285
fetchParticipants @ ajax-functions.js:869
fetchParticipants @ parent_dashboard.js:82
init @ parent_dashboard.js:14
loadParentDashboard @ router.js:342
await in loadParentDashboard
route @ router.js:177
(anonymous) @ router.js:512
ajax-functions.js:88 API Response: {success: true, data: Array(4)}
indexedDB.js:15 IndexedDB opened successfully
indexedDB.js:54 Data stored successfully: {key: 'org_form_formats_current', data: {…}, type: 'cache', timestamp: 1764556629388, expiration: 1764643029388}
ajax-functions.js:88 Data cached for: org_form_formats_current
router.js:48 Routing to: /formulaire-inscription
router.js:302 Path: /formulaire-inscription, RouteName: formulaireInscription
login.js:224 Session check: {isLoggedIn: true, userRole: 'admin', userFullName: 'Admin Csabourin', userId: '0df3bf27-4b00-4c69-b8fe-04ad48d1c631'}
router.js:417 Initializing FormulaireInscription with participantId: null
formulaire_inscription.js:44 Initializing FormulaireInscription with ID: null
formulaire_inscription.js:53 No participant ID provided, initializing empty form
formulaire_inscription.js:119 Creating initial structure
dynamicFormHandler.js:26 Initializing DynamicFormHandler {formType: 'participant_registration', participantId: null, initialData: {…}, container: 'participant-form', organizationId: null}
indexedDB.js:15 IndexedDB opened successfully
indexedDB.js:80 IDBRequest {result: {…}, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' {key: 'org_form_formats_current', data: {…}, type: 'cache', timestamp: 1764556629388, expiration: 1764643029388}
indexedDB.js:83 Returning valid cached data: {success: true, data: Array(4)}
ajax-functions.js:88 Cache hit for: org_form_formats_current
JSONFormRenderer.js:10 Form structure: {fields: Array(26)} Form data: {guardians: Array(0)}
dynamicFormHandler.js:155 Rendering form structure for type: participant_registration
dynamicFormHandler.js:156 Form data: {guardians: Array(0)}
JSONFormRenderer.js:10 Form structure: {fields: Array(26)} Form data: {guardians: Array(0)}
JSONFormRenderer.js:14 Rendering with formData: {guardians: Array(0)}
formulaire_inscription.js:29 Rendering form
dynamicFormHandler.js:155 Rendering form structure for type: participant_registration
dynamicFormHandler.js:156 Form data: {guardians: Array(0)}
JSONFormRenderer.js:10 Form structure: {fields: Array(26)} Form data: {guardians: Array(0)}
JSONFormRenderer.js:14 Rendering with formData: {guardians: Array(0)}
formulaire_inscription.js:140 Rendering guardian forms
formulaire_inscription.js:150 Guardian form data: []
formulaire_inscription.js:174 Initializing guardian form at index 0 with data: {}
dynamicFormHandler.js:26 Initializing DynamicFormHandler {formType: 'parent_guardian', participantId: null, initialData: {…}, container: div.guardian-form, organizationId: null}
formulaire_inscription.js:201 Attaching event listeners
indexedDB.js:15 IndexedDB opened successfully
indexedDB.js:80 IDBRequest {result: {…}, error: null, source: IDBObjectStore, transaction: IDBTransaction, readyState: 'done', …} ' Retrieved record:' {key: 'org_form_formats_current', data: {…}, type: 'cache', timestamp: 1764556629388, expiration: 1764643029388}
indexedDB.js:83 Returning valid cached data: {success: true, data: Array(4)}
ajax-functions.js:88 Cache hit for: org_form_formats_current
JSONFormRenderer.js:10 Form structure: {fields: Array(9)} Form data: {nom: '', prenom: '', lien: '', courriel: '', telephone_residence: '', …}
dynamicFormHandler.js:155 Rendering form structure for type: parent_guardian
dynamicFormHandler.js:156 Form data: {nom: '', prenom: '', lien: '', courriel: '', telephone_residence: '', …}
JSONFormRenderer.js:10 Form structure: {fields: Array(9)} Form data: {nom: '', prenom: '', lien: '', courriel: '', telephone_residence: '', …}
JSONFormRenderer.js:14 Rendering with formData: {nom: '', prenom: '', lien: '', courriel: '', telephone_residence: '', …}
formulaire_inscription.js:240 Form submission started
formulaire_inscription.js:271 Full form data to be submitted: {participantCoreData: {…}, formSubmissionData: {…}}
formulaire_inscription.js:290 Saving participant registration {participantData: {…}, guardiansData: Array(1)}
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-participant?organization_id=1
ajax-functions.js:88 API Response: {success: true, participant_id: 174, message: 'Participant created successfully'}
formulaire_inscription.js:304 Participant saved with ID: 174
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/link-user-participants?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-participant?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveParticipant @ ajax-functions.js:333
saveParticipantAndGuardians @ formulaire_inscription.js:297
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:88 API Response: {success: true, message: 'User linked to participants successfully'}
formulaire_inscription.js:307 linkUserParticipants result: {success: true, message: 'User linked to participants successfully'}
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-form-submission?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/link-user-participants?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
linkUserParticipants @ ajax-functions.js:487
saveParticipantAndGuardians @ formulaire_inscription.js:306
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:88 API Response: {success: true, data: {…}, message: 'Form saved successfully'}
formulaire_inscription.js:355 Guardians data before saving: [{…}]
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-form-submission?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveFormSubmission @ ajax-functions.js:350
saveParticipantAndGuardians @ formulaire_inscription.js:312
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
service-worker.js:108 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:224   POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:94  API request failed (attempt 1): Error: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:224 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:88 API Request (attempt 2): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1
ajax-functions.js:224 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:224   POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:94  API request failed (attempt 2): Error: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
formulaire_inscription.js:399  Error saving guardian: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
saveGuardians @ formulaire_inscription.js:399
await in saveGuardians
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
formulaire_inscription.js:326  Error saving participant and guardians: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
saveParticipantAndGuardians @ formulaire_inscription.js:326
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
service-worker.js:108 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
(anonymous) @ service-worker.js:108
formulaire_inscription.js:282  Error during form submission: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
handleSubmit @ formulaire_inscription.js:282
await in handleSubmit
(anonymous) @ formulaire_inscription.js:215
