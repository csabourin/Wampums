formulaire_inscription.js:240 Form submission started
formulaire_inscription.js:271 Full form data to be submitted: {participantCoreData: {…}, formSubmissionData: {…}}
formulaire_inscription.js:290 Saving participant registration {participantData: {…}, guardiansData: Array(1)}
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-participant?organization_id=1
service-worker.js:108 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-participant?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:88 API Response: {success: true, participant_id: 174, message: 'Participant updated successfully'}
formulaire_inscription.js:304 Participant saved with ID: 174
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/link-user-participants?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-participant?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveParticipant @ ajax-functions.js:333
saveParticipantAndGuardians @ formulaire_inscription.js:297
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
service-worker.js:108 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/link-user-participants?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:88 API Response: {success: true, message: 'User linked to participants successfully'}
formulaire_inscription.js:307 linkUserParticipants result: {success: true, message: 'User linked to participants successfully'}
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-form-submission?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/link-user-participants?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
linkUserParticipants @ ajax-functions.js:487
saveParticipantAndGuardians @ formulaire_inscription.js:306
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
service-worker.js:108 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-form-submission?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:88 API Response: {success: true, data: {…}, message: 'Form saved successfully'}
formulaire_inscription.js:355 Guardians data before saving: [{…}]
ajax-functions.js:60 === GET AUTH HEADER DEBUG ===
ajax-functions.js:61 Token exists: true
ajax-functions.js:62 Organization ID: 1
ajax-functions.js:63 Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkI...
ajax-functions.js:75 Generated headers: {Authorization: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2…0NjJ9.tIPaxrwhgiGYeiy6x-AtgVgSKZXjw4AjSWF9qSWmqNM', x-organization-id: '1'}
ajax-functions.js:76 === END AUTH HEADER DEBUG ===
ajax-functions.js:88 API Request (attempt 1): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1
ajax-functions.js:224 Fetch finished loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-form-submission?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveFormSubmission @ ajax-functions.js:350
saveParticipantAndGuardians @ formulaire_inscription.js:312
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:224   POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:94  API request failed (attempt 1): Error: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
service-worker.js:108 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:224 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
makeApiRequest @ ajax-functions.js:224
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:88 API Request (attempt 2): POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1
service-worker.js:108 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
(anonymous) @ service-worker.js:108
ajax-functions.js:224   POST https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1 404 (Not Found)
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:94  API request failed (attempt 2): Error: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at handleResponse (ajax-functions.js:151:15)
    at async makeApiRequest (ajax-functions.js:225:28)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
debugError @ ajax-functions.js:94
makeApiRequest @ ajax-functions.js:232
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
formulaire_inscription.js:399  Error saving guardian: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
saveGuardians @ formulaire_inscription.js:399
await in saveGuardians
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
formulaire_inscription.js:326  Error saving participant and guardians: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
saveParticipantAndGuardians @ formulaire_inscription.js:326
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
formulaire_inscription.js:282  Error during form submission: Error: Failed to complete API request after 2 attempts: <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Cannot POST /api/save-parent</pre>
</body>
</html>

    at makeApiRequest (ajax-functions.js:241:11)
    at async FormulaireInscription.saveGuardians (formulaire_inscription.js:371:28)
    at async FormulaireInscription.saveParticipantAndGuardians (formulaire_inscription.js:318:9)
    at async FormulaireInscription.handleSubmit (formulaire_inscription.js:274:9)
overrideMethod @ hook.js:608
handleSubmit @ formulaire_inscription.js:282
await in handleSubmit
(anonymous) @ formulaire_inscription.js:215
ajax-functions.js:224 Fetch failed loading: POST "https://d114d446-cf9a-4c4f-8c7f-9f4bff0d329f-00-2lardlryb2460.worf.replit.dev/api/save-parent?organization_id=1".
makeApiRequest @ ajax-functions.js:224
await in makeApiRequest
post @ ajax-functions.js:295
saveGuardian @ ajax-functions.js:711
saveGuardians @ formulaire_inscription.js:371
saveParticipantAndGuardians @ formulaire_inscription.js:318
await in saveParticipantAndGuardians
handleSubmit @ formulaire_inscription.js:274
(anonymous) @ formulaire_inscription.js:215
